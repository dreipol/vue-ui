# vue-ui

Intro

[![Build Status][circleci-image]][circleci-url]
[![Code quality][codeclimate-image]][codeclimate-url]
[![Code coverage][coveralls-image]][coveralls-url]
[![NPM version][npm-version-image]][npm-url]
[![NPM downloads][npm-downloads-image]][npm-url]
[![MIT License][license-image]][license-url]

## Purpose
Purpose

## Quickstart

1.  Install the module

    ```bash
    npm install -S @dreipol/vue-ui
    ```

## Mixins
### `intersectionObserverMixin`
[IntersectionObserver API](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver)
Load via `import { interactionObserverMixin } from '@dreipol/vue-ui';` and add it to the `mixins`.

Now you can start observing an element by

```js
    this.registerObserver(this.$el, 0.1);
```
This methods accepts 4 parameters

```js

    /**
    * @param {Element} element - Dom element
    * @param {number} thresholdMin - minimal threshold trigger
    * @param {number} thresholdMax - maximal threshold trigger
    * @param {Object} config - Config options
    */
    registerObserver(element, thresholdMin, thresholdMax = null, config = {})
```


Now it the element enters or leaves the viewport you can implement 3 methods in your component.

`onIntersect(isIntersecting, entry)`, `onIntersectEnter(entry)` or `onIntersectLeave(entry)`.
Those are called automatically by the mixin.

To unregister simply call `unregister` with the given element.


Example:
```js

export default {
    mixins: [interactionObserverMixin],
    props: {
        isMain: {
            type: Boolean,
            default: false,
        },
    },
    methods: {
        ...mapActions('navigation', ['setNavVisibility']),

        onIntersectEnter() {
            this.setNavVisibility({ isVisible: true });
        },

        onIntersectLeave() {
            this.setNavVisibility({ isVisible: false });
        },
    },

    beforeDestroy(){
        this.unregister(this.$refs.mainNavBar.$el);
    },

    mounted() {
        this.registerObserver(this.$el, 0.1);
    },
};


```

## Components

### `IntersectionObserverComponent`
A simple implementation of the `intersectionObserverMixin`. It's a simple component that will emit events

__Usage__
```js
    import { IntersectionObserverComponent } from '@dreipol/vue-ui';
```

__Props__

| Name | Type | Default |
| --- | --- | ---|
|`thresholdMin` |Number| 0.1 |
|`thresholdMax` |Number| null|

__Events__
-  `intersect(isIntersecting: boolean, entry: IntersectionObserverEntry )`
-  `intersect-enter(entry: IntersectionObserverEntry )`
-  `intersect-leave(entry: IntersectionObserverEntry )`

__Example__
```vue
    <intersection-observer @intersect-enter="onIntersectEnter">
        <div>
            Loading
        </div>
    </intersection-observer>
```


### `scroll-reveal`
Reveals the component passed by the slot while scrolling upwards and hides it when scrolling down.
You have to set the `bemRoot` prop. This prop is bem root class. `scroll-reveal` will add interfaces such as
- `&__pinned`
- `&__unpinned`
- `&__top`
- `&_not-top`
- `&__bottom`
- `&__not-bottom`

You have to style them on your own!

Example Usage

```html
    <scroll-reveal element-class="reduced-nav">
        <main-header />
    </scroll-reveal>
```


Example  SCSS

```scss
    // Vars

    // Support

    @mixin reveal-visible() {
        transform: translate3d(0, 60px, 0);
        opacity: 1;
    }

    @mixin reveal-hidden() {
        transform: translate3d(0, -80px, 0);
        opacity: 0;
    }

    // Module
    & {
        & {
            z-index: z-index('reveal');
            position: fixed;
            transform: translate3d(0, -80px, 0);
            height: 80px;
            width: 100%;
            transition: transform 200ms ease-in-out, opacity 200ms ease-in-out;
        }

        &.reveal__top {
            @include reveal-visible;
        }

        &.reveal__pinned {
            @include reveal-visible;
        }

        &.reveal__unpinned {
            @include reveal-hidden;
        }
    }

    // Facets

    // States
```


## Filters
### bgImage
Create the `background-image` style string from a given URL

Example:
```vue
    <div class="teaser-card--col teaser-card--right-pane"
        :style="backgroundRight | bgImage" />
```

### srcset
Transforms a list of urls into a valid `srcset` property

Example
```vue
<img src="..." :srcset="['http://via.placeholder.com/600x600', 'http://via.placeholder.com/1200x1200'] | srcset"/>
```

## Plugin config

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->


##
[circleci-image]: https://circleci.com/gh/dreipol/vue-ui.svg?style=svg
[circleci-url]: https://circleci.com/gh/dreipol/vue-ui
[license-image]: http://img.shields.io/badge/license-MIT-000000.svg?style=flat-square
[license-url]: LICENSE
[npm-version-image]: http://img.shields.io/npm/v/@dreipol/vue-ui.svg?style=flat-square
[npm-downloads-image]: http://img.shields.io/npm/dm/@dreipol/vue-ui.svg?style=flat-square
[npm-url]: https://npmjs.org/package/@dreipol/vue-ui
[codeclimate-image]: https://api.codeclimate.com/v1/badges/fb8c4a8a6043d9e73f7f/maintainability
[codeclimate-url]: https://codeclimate.com/github/dreipol/vue-ui/maintainability
[coveralls-image]: https://coveralls.io/repos/github/dreipol/vue-ui/badge.svg?branch=develop
[coveralls-url]: https://coveralls.io/github/dreipol/vue-ui?branch=develop
